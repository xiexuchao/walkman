### 第四章 概率论简介

  内容列表
  统计实践:OCEANWIDE SEAFOOD
  4.1 实验、计数规则以及分配概率
  * 计数规则、组合和排列
  * 分配概率
  * KP&L项目概率
  

  4.2 事件及事件概率
  
  4.3 概率间的基本关系
  事件补集
  加法法则
  
  4.4 条件概率
  独立事件
  乘法法则
  
  4.5 贝叶斯定理
  表格化方法
  
  管理者决定经常基于对那些不确定因素的分析:
  * 如果我们增加销售价格，那么销售减少的几率有多大?
  * 新的装配方式对提高生产率的可能性是什么?
  * 项目按时完成的可能性怎样?
  * 新的投资机会是什么?
  
  概率是事件会发生的可能性的数字化度量。 因此可以使用概率和上面列出的4个问题相关联。如果概率可用，我们能确定每个事件发生的可能性。

  概率的值总是在0和1之间。 概率值接近0表明事件基本不可能发生；而概率接近1，表明事件很可能发生。其他在0到1之间的标示事件即将发生的可能性的程度。
  
### 4.1 实验、计数规则以及概率分配
  在讨论概率的时候，我们定义实验作为产生定义良好的结果的过程。 对于任何实验的重复，有且只有一种可能的实验结果会出现。下面是几个实验以及它们相应实验结果的例子:
```
实验(Experiment)        实验结果(Experiment Outcomes)
抛硬币                  正面，反面
选择一部分进行检测      缺陷品，良品
进行电话销售拜访        购买，不购买
丢骰子                  1，2，3，4，5，6
足球赛                  胜利、失败、平局
```

  通过指定所有可能的实验结果， 我们为实验标示样本空间。
  
  样本空间(sample space): 实验的样本空间是实验结果的集合。
  
  实验结果也被称为样本点(sample point), 用于标示样本空间的一个元素。
  
  ![](https://github.com/walkerqiao/walkman/blob/master/images/da/sfbe_prob_value_range_demo.png)
  
  考虑上面表中的第一个实验，抛硬币。 硬币朝上的那一面--头像还是文字--决定实验结果(样本点)。 如果我们使用S表示样本空间，那么我们可以使用下面的形式来描述样本空间。
  S = {正面, 反面}
  
  上面表中的第二个实验，选择一部分进行检测,可以描述如下: S = {缺陷品, 良品}
  上面的两个实验都描述为两个实验结果(样本点)。然而，假设我们考虑第四个实验，投骰子，那么可能的实验结果，定义为骰子朝上的点数目，表达如下: S = {1, 2, 3, 4, 5, 6}
  
  计数规则、组合和排列(Counting Rules, Combinations, and Permutations)
  能够对实验结果进行标示是概率分配的必要步骤。 我们现在介绍三种有用的计数规则。
  
  多步实验 第一个计数规则应用于多步实验。 考虑抛两个硬币的实验。S ={(H,H), (H,T), (T,H), (T,T)}
  这个实验，我们可以穷举所有样本点。 但多步实验的计数规则可以让我们不用列出所有的样本点，就可以知道实验结果的数量。
  
> 多步实验的计数规则
  如果实验可以描述为连续的k步，第一步可能的实验结果为n1, 第二步可能的实验结果为n2, 等等， 那么总共的实验结果可以通过(n1)(n2)...(nk)来给定。
  
  抛两个硬币的实验的树形图
  ![](https://github.com/walkerqiao/walkman/blob/master/images/da/sfbe_tree_dialog_for_two_coins.png)
  
  树形图(tree dialog)是辅助多步实验可视化的一种图形化展示。
  
  组合(Combinations): 第二个有用的计数规则是允许对实验结果进行计数，当涉及到从N个对象集中间选择n个对象的实验。组合计数规则。
  
  ![](https://github.com/walkerqiao/walkman/blob/master/images/da/sfbe_combinations_cr.png)
  
  排列(Permutations): 第三种计数规则。计算当从N个对象集合中选择n个对象，并且选择的顺序非常重要的情况。同样的n个选择对象，它们的顺序不同看作不同的实验结果。
  
  ![](https://github.com/walkerqiao/walkman/blob/master/images/da/sfbe_permutations_cr.png)
  
  排列计数规则和组合技术规则有密切关系，排列中的实验结果比组合中的实验结果所多之处在于相同的元素之间的序列问题。对于相同的n个对象，可以有n!种不同的排序方式。
  
  概率分配
  现在让我们看看如何给实验结果的分配概率。三种最常使用的方法有经典方法、相对频率方法、主观方法。 不管使用什么方法， 概率分配必须满足两个基本必要条件。
  
  概率分配基本必要条件:
  1. 分配给每个实验结果的概率必须在0和1之间， 包含两个端点。如果使用E<sub>i</sub>表示第i个实验结果，P(E<sub>i</sub>)表示它的概率， 那么这个必要条件可以写成: 0≤P(E<sub>i</sub>)≤1 对所有i
  2. 所有实验结果的概率之和必须等于1.0. 对于n个实验结果，这个必要条件可以写成 P(E1) + P(E2) + ... + P(En) = 1.0
  
  概率分配的经典方法是所有的实验结果具有等可能性。如果可能有n个实验结果，那么每个实验结果的概率就是1/n。 当使用这种方法，概率分配的两个必要条件会自动满足。


  即使在商业环境下，也存在典型或相对频率方法可被应用，管理人员也可能采用主观概率估计。 这些例子中，最好的概率估计通常都是通过组合典型或相对频率方法和主观概率估计。
  
  
  概率分配的相对频率方法当数据可用于估计实验结果在大量重复实验中可能出现的比例。


### 4.2 事件及事件概率
  事件: 一个事件就是一些样本点的集合。
  KP&L项目
  ![](https://github.com/walkerqiao/walkman/blob/master/docs/da/sfbe_kp_l_proj.png)
  样本空间集合S = {(2, 6), (2, 7), (2, 8), (3, 6), (3, 7), (3, 8), (4, 6), (4, 7), (4, 8)}
  
  总共完成不超过10个月，该事件记做C = {(2, 6), (2, 7), (2, 8), (3, 6), (3, 7), (4, 6)}
  
  而L=事件(项目完成少于10个月)、M=事件(项目完成超过10个月的)
  则L = {(2, 6), (2, 7), (3, 6)}、M = {(3, 8), (4, 7), (4, 8)}

  事件概率: 任意事件的概率等于事件中样本点的概率之和。
  
  * 样本空间S也是一个事件。因为它包含所有的实验结果，它的概率为1. 也就是说P(S) = 1
  * 当经典方法用于分配概率，假设实验结果是等可能的。 这种情况下，事件概率可以通过对事件中实验结果的数目进行统计，然后除以总的实验结果数。
  
### 4.3 概率的一些基本关系
  事件补集(Complement of an Event). 

### 4.5 贝叶斯定理(Bayes' Theorem)
  在条件概率讨论中，我们表明当新信息获取的时候修正概率是概率分析中重要的阶段。通常，我们以最初的或先验概率开始分析我们感兴趣的特定事件。然后从诸如样本、特定报告或产品测试这样的源中，我们获得关于事件的额外信息。 给出它新的信息，我们更新先验概率值，通过计算修正概率，称作后验概率。
  贝叶斯定理提供了一种计算这些概率的方法。 概率修正过程的步骤展示如下图4.9:
  ![](https://github.com/walkerqiao/walkman/blob/master/docs/da/sfbe_prob_revision_using_bayes.png)
  
  先验概率 --> 获取新信息 --> 应用贝叶斯定理 --> 后验概率
  
  作为贝叶斯定理的应用，我们考虑一个制造公司，它接收来自两个不同供应商提供的出货。 假设A1表示部件是从供应商1来的这样的事件， A2表示部件为供应商2来的。 同时公司65%的部件是从供应商1购买的，而其他剩余的35%部件是从供应商2购买来的。 因此， 随机选择一个部件， 我们将给如下的先验概率P(A1) = 0.65, P(A2) = 0.35.
  
```
供应商      好的部件百分比            坏的部件的百分比
供应商1 A1     98%                       2%
供应商2 A2     95%                       5%

以上信息可由公司历史进货记录及部件质量统计信息得出。
```
  购买的部件质量也跟供应商不同而不同。 历史数据显示这两个供应商的质量评分结果如表4.6. 如果用G表示部件为好的，B表示部件为坏的， 那么表4.6提供的信息可以使用如下的概率值表示:
  P(G|A1) = 0.98,  P(B|A1) = 0.02, P(G|A2) = 0.95, P(B|A2) = 0.05
  
  ![](https://github.com/walkerqiao/walkman/blob/master/docs/da/sfbe_tree_diagram_for_2_suppliers.png)
  
  上面的图表示公司从两个公司之一接收到一个部件，然后看该部件是好还是坏的两步实验。我们可以看到可能的四种实验结果； 两个实验结果是好的， 而另外两个实验结果是坏的。
  
  每个实验结果是两个事件的交集， 因此我们可以使用乘法规则来计算它的概率， 例如:
  P(A1,G) = P(A1 ∩ G) = P(A1).P(G|A1)
  
  计算这些联合概率的过程可以使用叫做概率树的图中表示(见图4.11)。从左到右遍历树，每一个分支第一步的概率叫做先验概率， 第二步叫做条件概率。 为了找出每个实验结果的概率， 我们只需要简单的使用乘法法则计算它们。 每种实验结果的概率都展示在图4.11中。
  ![](https://github.com/walkerqiao/walkman/blob/master/docs/da/sfbe_prob_tree_for_2_suppliers.png)

  现在假设从这两个供应商提供的部件用于公司的生产过程，某台机器在尝试处理一个坏的部件的时候坏掉了。 那么给出部件是坏的这个信息， 那么这个坏的部件来自于供应商1和供应商2的概率各是多少? 使用概率树中的信息，贝叶斯定理可以用于回答这个问题。
  
  这个例子中来说， 从两个供应商购买部件的概率属于先验概率(prior probabilities), 而两个供应商的产品好坏概率(第二步)属于条件概率。 实验结果的概率可以通过乘法法则获得。 而此时需要估算的概率是P(A1|B), P(A2|B)。 条件概率法则，我们可以知道 P(A1|B) = P(A1 ∩ B)/P(B). 参考概率树，我们可以看到P(A1 ∩ B) = P(A1)P(B|A1).
  
  而P(B)而言，事件B分为两种方式发生: A1 ∩ B, A2 ∩ B. 因此，我们有: P(B) = P(A1 ∩ B) + P(A2 ∩ B) = P(A1)P(B|A1) + P(A2)P(B|A2)
  
  因此P(A1|B) = P(A1 ∩ B) / P(B) = ( P(B|A1).P(A1) ) / ( P(A1)P(B|A1) + P(A2)P(B|A2) )
