### 第7章 抽样和抽样分布

  在第一章我们展示了元素、总体以及样本的定义:
  * 元素(Element): 数据搜集的记录(entry).
  * 总体(Population): 所有感兴趣的元素集合。
  * 样本(Sample): 总体的子集。
  
  我们抽样的目的是搜集数据来作出关于总体的推断和解答研究问题。

  让我们通过引用两个例子，用抽样来解答关于总体的研究问题。
  1. 得克萨斯州的政党成员考虑支持美国参议院的某个候选人， 党领导希望估计该州支持这个候选人的注册选举人的比例。400个德克萨斯州的选民样本被抽取，400个中间有160个选民表明支持该候选人。 因此，注册的选民中支持该候选人的比例估计为160/400=0.40.
  2. 某轮胎生产商考虑生产一种新轮胎设计，希望增加公司当前轮胎的行程里数。为了估计新轮胎的平均使用寿命， 生产商生产了120个轮胎来检测。 检测结果提供的样本均值为36,500公里。 因此，估计新轮胎总体平均使用寿命是36,500公里。
  
  意识到样本结果仅仅对相应的总体特性提供估计值是非常重要的。我们不会期望注册选民总体支持候选人的比例精确为0.4或40%， 也不会期望新生产轮胎的平均使用寿命精确为36,500公里。 原因很简单，样本只是总体的子集，仅包含总体的部分元素。取样误差允许出现的。使用恰当的取样方法，样本结果会对总体参数有较好的估计。 但是我们期望结果好到什么程度呢？ 幸运的是，统计程序可以帮助我们回答这个问题。

  让我们定义一些取样中使用的术语。
  * 取样总体(Sampled population): 样本抽出来源总体。
  * 桢(frame): 桢就是样本要被选择来源的元素列表。
  
  在第一个例子中，取样总体是所有德克萨斯州的注册选民。因为德克萨斯州注册选民的数量是有限数字， 第一个例子是从有限总体中进行抽样。在7.2节，我们讨论我们如何从有限总体总进行简单随机抽样。

  对于轮胎公司的例子来说取样总体比较难定义，因为120个轮胎样本是在特定时间生产过程中获取的。 我们可以认为取样总体为在那个时间点生产过程中已经生产的所有轮胎的概念上的总体。在这个意义上来说，取样总体是无限总体， 构建抽样桢是不大可能的。 在7.2，我们讨论这种情况下如何随机抽样。
  
  在本章，我们将展示如何在有限总体中使用简单随机抽样来进行抽样，以及在持续过程产生的无限总体中使用简单随机抽样进行抽样的。我们然后展示样本中获取的数据如何用于计算总体均值的估计。另外，我们介绍抽样分布这个重要概念。正如我们将展示的，近似的抽样分布只是能让我们表述样本估计与相应总体参数的接近程度。 最后一节讨论一些实践中经常利用的备选简单随机取样。
  
### 7.1 电子联合公司(EAI)抽样问题
  EAI公司人事主管接到一项任务，需要为2500个管理人员开发用户画像。需要确定的特征包含管理者的平均年薪、管理者完成公司管理培训计划的比例。
  
  这个研究使用2500个管理者作为总体， 我们可以通过公司个人记录获取每个个体的年薪以及培训状态。 这个数据集包含总体中所有2500个管理者的信息，保存在名字为EAI的文件中。
  
  使用EAI数据以及在第三章中出现的公式，我们能计算年薪数据的总体均值以及总体标准方差。
  总体均值:μ = $51,800
  总体标准方差:σ = $4000
  
  培训计划状态显示2500个管理者中有1500个已经完成了培训计划。
  
  总体的数字化特征称为参数(parameters). 用p表示总体中完成培训计划的比例， 我们可以看到p=1500/2500=0.60。总体平均年薪(μ = $51,800), 年薪总体标准方差(σ = $4000), 总体完成培训计划的比例(p = 0.6)是EAI管理者的总体参数。
  
  那么，假设EAI管理者的必要信息在公司数据库中尚未完全可以用。 现在我们考虑公司人事主管如何使用从2500个管理人中抽样而不用整体，然后对总体参数进行估计呢? 假设使用30个管理者的样本。 显然，对于使用30个管理者的样本比使用整个总体在开发用户画像来说，在时间和代价上都是明显少很多的。如果公司人事主管假设30个样本能够提供关于2500个总体的充足信息，使用样本比使用整个总体进行工作更胜一筹。
  
### 7.2 选择样本
  本节我们描述如何选择样本。 首先描述如何从有限总体抽样，然后描述如何从无限总体抽样。
  
#### 从有限总体选择样本
  统计专家推荐在从有限总体中抽样的时候选择概率抽样， 因为概率抽样能对总体作出有效的统计推断。概率抽样的最简单类型是每个尺寸n的样本都是等概率被选择的。这称为简单随机抽样。从大小为N的有限总体中抽样大小为n的简单随机抽样定义如下:
```
简单随机抽样(有限总体)
简单随机抽样: 从大小为N的总体中选择大小为n的样本， 每个大小为n的样本都有相同概率被选择。
```
  从有限总体中选择简单随机抽样的一道工序是一次一个的从总体中选择样本， 总体中剩下的被选择的概率也是相等的。这种方式，选择n个元素就满足了从有限总体中简单随机抽样的定义。
  
  不重复抽样(sampling without replacement): 任何一个元素一旦被抽取， 后续步骤不再有机会抽取到该元素，这样的抽样方式叫不重复抽样， 也叫不放回抽样。
  
  重复抽样(sampling with replacement): 任何一个元素被抽取后，后续步骤还有和其他元素具有相同概率被抽取，这样的抽样方式叫做重复抽样， 也叫放回抽样。
  
  重复抽样是标示简单随机抽样的有效方式。然而，不重复抽样是比较常用的样本抽样方式。 当我们后面提到简单随机抽样，我们假设是使用不重复抽样。
  
#### 无限总体抽样
  有时候， 我们想要从某个总体抽样，但总体是无限的、非常大、或者总体元素是后续过程产生的，没有限制可以产生多少的情况。因此，不可能指出总体中所有元素的列表。 我们视之为无限总体情况。对于无限总体，我们不能简单随机抽样，因为我们不能构建组成所有元素的桢。 在无限总体情况下， 统计专家推荐选择所谓的随机抽样。
  
```
随机抽样(无限总体)
随机抽样：从无限总体中抽取n个样品，抽样选择满足下面的条件:
1. 每个抽样元素来自同一总体
2. 每个元素都是独立抽取的(互不影响)
```
  
  从无限总体中获取随机样本的抽样过程实现必须进行小心判断。每种不同情况可能需要不同抽样过程。 下面我们考虑两个例子来看下面条件是什么意思:
  1. 每个抽样元素来自相同的总体
  2. 每个元素是独立抽取的
  
  通用质量控制应用涉及到没有对可能生产的元素数量限制的生产过程。 我们抽样的概念总体是那些在后续生产过程中将被生产的所有元素(不仅仅是已经生产的)。因为我们不能指出将被生产的所有元素的列表， 总体视为无限的。 更具体的说， 让我们考虑一个生产线， 设计填充早餐谷物餐盒，每个盒子平均重量24盎司。 通过这个过程填充的12个盒子的样本定期被质量控制程序选择出来，以确定过程操作正确与否， 可能机器故障发生，该过程会导致过少或过多填充盒子。

  就如这样的生产操作而言， 最大的关注是随机抽样确保满足条件1， 样本是从相同总体中抽取的这一条件是满足的。 为了确保这个条件满足， 盒子选择必须几乎在同一时间点选择。 这种方式，抽检员避免选择的一部分盒子是操作正确的，另外一部分是操作错误的盒子装太满或太浅。就如这样的生产过程，第二个条件， 每个元素是独立抽取的， 因为生产过程每个盒子都是单独填充的，因此满足这一条件。
  
  有了这个假设， 质量控制抽查员只需要担心满足是否为同一个总体的条件。
  
  从无限总体抽样的另外一个例子是， 到达快餐店的总体顾客。 假设员工需要调查一些样本顾客， 开发哪些类型顾客访问该餐厅的顾客画像。 顾客到达过程是不断进行的，因此没有办法获取所有顾客的总体。 因此，对于实践目的，这个情况的总体是无限总体。这种情况下，雇员搜集样本需要从哪些进入餐馆买单的顾客抽样， 确保满足同样的样本条件。 例如，如果雇员抽选的某个人仅仅是进入快餐店借用洗手间，那么这个样本将违反来自相同的样本总体这个条件。因此，只要调查对象是进入餐馆消费的顾客，条件1就满足。 确保顾客是独立抽样这个比较难确定。
  
  随机抽样的第二个条件目的是防止抽样偏见bias(每个元素独立抽样)。 这个例子中，抽样偏见在调查者自由选择客户样本时会发生。 调查者可能对某些年龄段的顾客感觉良好， 而对其他年龄段的感觉不太好， 造成抽样偏见。 调查者在对同时进入快餐店的5人一起作为样本咨询他们参加样本，这样也会造成抽样偏见。
