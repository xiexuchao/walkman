#网络基础知识
  本章总结了深入理解TCP/IP所必备的基础知识， 其中包括计算机与网络发展的历史及其标准化过程、OSI参考模型、网络概念的本质、网络构建的设备等。
  
```
+------------+                  +----------------------------------+
|7    应用层 |                  |           <应用层>               |
+------------+                  | TELNET, SSH, HTTP, SMTP, POP,    |
|6    表示层 |                  | SSL/TLS, FTP, MIME, HTML, SNMP,  |
+------------+                  | MIB, SIP, RTP ...                |
|5    表示层 |                  |                                  |
+------------+                  +----------------------------------+
|4    传输层 |                  |<传输层>TCP,UDP,UDP-Lite,SCTP,DCCP|
+------------+                  +----------------------------------+
|3     网络层|                  |<网络层>ARP,IPv4,IPv6,ICMP,IPsec  |
+------------+                  +----------------------------------+
|2 数据链路层|                  | 以太网、无线LAN、PPP......       |
+------------+                  | (双胶线电缆、无线、光纤......)   |
|1    物理层 |                  |                                  |
+------------+                  +----------------------------------+
```

##计算机网络出现的背景
### 1.1.1 计算机普及与多样化
  计算机正对我们的社会与生活产生着不可估量的影响。 现如今，计算机已应用于各种各样的领域， 以至于有人说"20世纪最伟大的发明就是计算机"。计算机不仅被广泛引入到办公室、工厂、学校、教育机关以及实验室等场所， 就连在家里使用个人电脑也已是普遍现象。 同时，笔记本电脑、平板电脑、手机终端(智能手机)等便携设备的持有人群也日益增多，甚至外观上一点都不像计算机的家用电器、音乐播放器、办公电器、汽车等设备中，一般也会内置一个小型等芯片， 使这些设备具有相应的计算机控制功能。在不经意间，我们的工作生活已与计算机紧密相连。而且我们所使用的计算机和带有内置计算机的设备当中，绝大多数都具有互联网功能。
  计算机自诞生伊始，经历了一些列演变与发展。大型通用计算机、超级计算机、小型机、个人电脑、工作站、便携式电脑以及现如今的智能手机终端等都是这一过程的产物。 它们的性能逐年增强，价格却逐年下降，机体规模也正在逐渐变小。

### 1.1.2 从独立模式到网络互联模式
  起初，计算机以单机模式被广泛使用(这种方式也叫独立模式)。然而随着计算机的不断发展，人们已不在局限于单机模式，而是将一个个计算机连接在一起， 形成一个计算机网络。连接多台计算机可以实现信息共享，同时还能在两台物理位置较远的机器之间及时传递信息。
  
  

### 1.5.4 OSI参考模型中各个分层的作用
```
+---+--------+--------------------------+----------------------------------------------+
|   |        |                          |               针对每个应用的协议             |
|   |        |                          |       电子邮件 <----> 电子邮件协议           |
| 7 | 应用层 | 针对特定应用的协议       |       远程登录 <----> 远程登录协议           |
|   |        |                          |       文件传输 <----> 文件传输协议           |
+---+--------+--------------------------+----------------------------------------------+
|   |        |                          |      ^      +-------------+     +---+        |
|   |        | 设备固有数据格式和网络   |    (   ) -> |网络标准格式 | ->  |   |        |
| 6 | 表示层 | 标准数据格式的转换       |      V      +-------------+     +---+        |
|   |        |                          |接收不同表现形式的信息，如文字流、图像、声音等|
+---+--------+--------------------------+----------------------------------------------+
|   |        | 通信管理                 | 何时建立连接，何时断开连接以及保持多久的连接 |
| 5 | 会话层 | 负责建立和断开连接。     |                                              |
|   |        |                          | +------+                            +------+ |
|   |        | (数据流动的逻辑通路)     | |point | o=========================o|point | |
|   |        |                          | +------+ o=========================o+------+ |
|   |        | 管理传输层以下的分层。   |                                              |
+---+--------+--------------------------+----------------------------------------------+
|   |        |                          |                                              |
| 4 | 传输层 | 管理两个节点之间的       |                                              |
|   |        | 数据传输. 负责可靠传输   |  point-> data|header data|header -> point    |
|   |        | (确保数据被可靠地传送    |                                              |
|   |        |        到目标地址)       |                                              |
+---+--------+--------------------------+----------------------------------------------+
| 3 | 网络层 | 地址管理与路由选择       |   经过哪个路由传递到目标地址?                |
+---+--------+--------------------------+----------------------------------------------+
|   |        |                          |   数据帧与比特流之间的转换                   |
| 2 |  数据  |  互联设备之间传送和识别  |                                              |
|   | 链路层 |        数据帧            |    分段转发                                  |
|   |        |                          |                                              |
+---+--------+--------------------------+----------------------------------------------+
|   |        |                          | 比特流与电子信号之间的切换                   |
| 1 | 物理层 | 以0、1代表电压高低       |                                              |
|   |        | 灯光的闪灭。             | 连接器与网线的规格                           |
|   |        | 界定连接器和网线的规格   |                                              |
+---+--------+--------------------------+----------------------------------------------+
```
#### 应用层
  为应用程序提供服务并规定应用程序中通信相关的细节。包括文件传输、电子邮件、远程登录(虚拟终端)等协议。

#### 表示层
  将应用处理的信息转换为适合网络传输的格式，或者来自下一层的数据转换为上层能够处理的格式。因此它主要负责数据格式的转换。
  具体来说，就是将设备固有的数据格式转换为网络标准传输格式。不同设别对同意比特流解释的结果可能会不同。 因此，使它们保持一致是这一层的主要作用。
  
#### 会话层
  负责建立和断开通信连接(数据流动的逻辑通道)，以及数据的分割等数据传输相关的管理。
#### 传输层
  起着可靠传输的作用。 只在通信双方节点上进行处理，而无需在路由器上处理。
  
#### 网络层
  将数据传输到目标地址。 目标地址可以是多个网络通过路由器连接而成的某一个地址。因此这一层主要负责寻址和路由选择。
  
#### 数据连路层
  负责物理层面上互联的、节点之间的通信传输。将0、1序列划分为具有意义的数据帧传送给对端(数据帧的生成与接收).
#### 物理层
  负责0、1比特流(0、1序列)与电压的高低、光的闪灭之间的互转。
  
  
## 1.7 传输方式的分类
  网络与通信中可以根据其数据发送方法进行多种分类。分类方法也有很多，以下我们介绍其中的几种。
  
### 1.7.1 面向由连接型与面向无连接型
  通过网络发送数据，大致可以分为面向有连接与面向无连接两种类型。
  
#### 面向有连接型
  面向有连接型中，在发送数据之前，需要在收发主机之间连接一条通信线路。
  
  面向有连接型好比人们平常打电话， 输入完对方号码播出之后，只有对端拿起电话才能真正通话，通话结束后将电话机扣上就如同切段电源。因此在面向有连接的方式下，必须在通信传输前后，专门进行建立和断开连接的处理。 如果与对端之间无法通信，就可以避免发送无谓的数据。
  
#### 面向无连接型
  面向无连接型则不需要建立和断开连接。发送端可于任何时候自由发送数据。反之，接收端也永远不知道自己会在何时从哪里收到数据。 因此，在面向无连接的情况下， 接收端需要市场确认是否收到了数据。
  
  这就如同人们去邮局寄包裹一样。负责处理邮递业务的营业员，不需要确认收件人的详细地址是否真的存在，也不需要确认收件人是否能收到包裹，只要发件人有一个寄件地址就可以办理包裹业务。 面向无连接通信与电话通信不同，它不需要拨打电话、挂掉电话之类的处理，而是全凭发送端自由地发送自己想要传递出去的数据。
  
  因此，在面向无连接的通信中，不需要确认对端是否存在。及时接收端不存在或无法接收数据， 发送端也能将数据发送出去。
  
### 1.7.2 电路交换与分组交换
  目前，网络通信方式大致分为两种--电路交换和分组交换。 电路交换技术的历史相对久远，主要用于过去的电话网。 而分组交换技术则是一种较新的通信方式，从20世纪60年代后半叶才开始逐渐被人们认可。本书着力介绍的TCP/IP，正是采用了分组交换技术。
  
  在电路交换中，交换机重要负责数据的中转处理。 计算机首先被连接到交换机上，而交换机与交换机之间则由众多通信线路再继续连接。因此计算机之间在发送数据时，需要通过交换机与目标主机建立通信电路。 我们将连接电路成为建立连接。建立号连接以后，用户就可以一直使用这条电路，直到该连接被断开为止。
  
  如果某条电路知识用来连接两台计算机的通信线路，就意味着只需在这两台计算机之间实现通信，因此这台计算机时可以独占线路进行数据传输的。 但是，如果一条电路上连接了多台计算机，而这些计算机之间需要相互传递数据，就会出现新的问题。 鉴于一台计算机在收发信息时会独占整个电路， 其他计算机智能等待这台计算机吹结束以后才有机会使用这条电路收发数据。并且在此过程中， 谁也无法预测某一台计算机的数据传输从何时开始又在何时结束。如果兵法用户数据超过交换机之间的通信线路数，就意味着通信根本无法实现。
  
  为此，人们想到了一个新的方法，即让连接到通信电路的计算机将所要发送的数据分成多个数据包，按照一定的顺序排列之后分别发送。这就是分组交换。 有了分组交换，数据被细分后，所有的计算机就可以一齐收发数据，这样也就提高了通信线路的利用率。 由于在分组的过程中，已经在每个分组的收不写入了发送端和接收端的地址，所以即使同一条线路同时为多个用户提供服务，也可以明确区分每个分组数据发往的目的地，以及它是与哪台计算机进行的通信。
  
  在分组交换中，由分组交换机(路由器)连接通信线路。分组交换的大致处理过程是:发送端计算机将数据分组发送给路由器，路由器收到这些分组数据后，缓存到主机的缓冲区，然后再转发给目标计算机。因此，分组交换也有另一个名称:蓄积交换。
  
  路由器接收到数据以后会按顺序缓存到相应的队列当中，再以先进先出的顺序将它们逐一发送出去。
  
  在分组交换中，计算机与路由器之间以及路由器与路由器之间通常只有一条通信线路。因此，这条线路其实是一条共享线路。在电路交换中，计算机之间传输速度不变。然而在分组交换中，通信线路的速度可能会有所不同。根据网络拥堵的情况，数据达到目标地址的时间有长有短。 另外，路由器的缓存饱和或溢出时，甚至可能会发生分组数据丢失、无法发送到对端的情况。
  
### 1.7.3 根据接收端数量分类
  网络通信当中，也可以根据目标地址的个数及其后续的行为对通信进行分类。如：广播、多播就是这种分类的产物。
  
  单播(Unicast): 1对1通信。早先的固定电话就是单播通信的一个典型例子。
  广播(Broadcast): 将消息从1台主机发送给与之相连的所有其他主机。 广播通信的一个典型例子就是电视播放，它将电视信号一齐发送给非特定的多个接受对象。
  此外我们知道电视信号一般都有自己的频段。只有在相应频段的可接受范围内才能收到电视信号。 与之类似，进行广播通信的计算机也有它们的广播范围。只有在这个范围之内的计算机才能收到相应的广播消息。这个范围叫广播域。
  多播(Multicast): 多播与广播类似，也是将消息发给多个接收主机。不同之处在于多播要限定某一组主机作为接收端。 多播通信最典型的例子就是电视会议，这时有多组人在不同的地方参加的一种远程会议。 在这种形式下，会有一台主机发送消息给特定的多台主机。电视会议通常不能使用广播方式，否则将无从掌握是谁在哪里参与电视会议。
  
  任播(Anycast): 任播是指在特定的多台主机中选出一台作为接收端的一种通信方式。 虽然，这种方式与多播有相似之处，都是面向特定的一群主机，但是它的行为却与多播不同。 任播通信从目标主机群中选择一台最符合网络条件的主机作为目标主机发送消息。 通常，所被选中的那台特定主机将返回一个单播信号，随后发送端主机会跟这台主机进行通信。
  
  任播在世纪网络中的应用有DNS根域名解析服务器。
  
  
## 1.8 地址
  通信传输中， 发送端和接收端可以被视为通信主体。它们都能由一个所谓"地址"的信息加以标识出来。当人们使用电话时，电话号码就相当于"地址"。当人们选择写信时，通信地址加上姓名就相当于地址。
  
  现实生活中的地址比较容易理解，然而在计算机通信当中，这种地址的概念显得要复杂一些。 因为在实际的网络通信当中， 每一层的协议所使用的地址都不尽相同。 例如，TCP/IP通信中使用MAC地址、IP地址、端口号等信息作为地址标识。甚至在应用层中，可以将电子邮件地址作为网络通信的地址。
  
### 1.8.1 地址的唯一性
  如果想让地址在通信当中发挥作用，首先需要确定通信的主体。一个地址必须明确地表示一个主体对象。在同一个通信网络中不允许有两个相同地址地通信主体存在。这也就是地址地唯一性。
  
  到此为止，读者可能会有一个疑问。前面提到， 在同一个通信网络中不允许有两个相同地址地通信主体存在。这在单播通信中还好理解，因为通信两段都是单一地主机。那么对于广播、多播、任播通信该如何理解呢？ 岂不是通信接收端都被赋予了同一个地址？其实，在某种程度上，这样理解有一定的合理性。 在上述这些通信方式中， 接收端设备可能不止一个。 为此，可以对这些由多个设备组成的一组通信赋予同一个具有唯一特性的地址，从而可以避免产生歧义，明确接收对象。
  
  举个简单的多播的例子。某位老师说：“一年一班的同学们请起立！” 其中“一年一班”实际上就明确地指代了目标对象。此时，“一年一班”就是这一次“多播”地目标地址，具有唯一性。
  
  再举一个任播的例子。老师又说：“一年一班的哪位同学过来把你们班的学习资料取走！”， 此时“一年一般的哪位同学”(任意一位同学)就成为了此次“任播”的目的地址，具有唯一性。
  
### 1.8.2 地址的层次性
  当地址总数并不是很多的情况下，有了唯一地址就可以定位相互通信的主体。然而，当地址的总数越来越多的时候，如何高效地从中找出通信地目标地址将成为一个重要地问题。 为此人们发现除了具有唯一性还需要具有层次性。 其实，再使用电话和信件通信地过程中，早已经有了地址分层这种概念。 例如，电话号码包含国家区号、国内区号，通信地址包括国家名、省名、市名和区名等。正是有了这种层次分类才能更加快速地定位某一个地址。
  
  
