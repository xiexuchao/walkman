#TCP/IP基础知识

## 2.5 TCP/IP分层模型与通信示例

### 2.5.1 数据包首部
```
+--------------+----------+-----------+------------+
| 以太网包首部 | IP包首部 | TCP包首部 |    数据    |
+--------------+----------+-----------+------------+
_              |<-----------以太网数据------------>|
_              +----------+-----------+------------+
_              | IP包首部 | TCP包首部 |    数据    |
_              +----------+-----------+------------+
_                         |<--------IP数据-------->|
_                         +-----------+------------+
_                         | TCP包首部 |    数据    |
_                         +-----------+------------+
_                                     |<-TCP数据-->|
```
  每个分层种，都会对所发数据附加一个首部，在这个首部中包含了该层必要的信息，如发送的目标地址以及协议相关信息。通常，为协议提供的信息为包首部，所要发送的内容为数据。 在下一层的角度来看，从上一层收到的包全部都被视为本层的数据。
  
```
  包、帧、数据报、段、消息
  以上五个术语都用来表述数据的单位，大致区分如下:
  包: 可以说是全能性术语。
  帧: 用来标识数据链路层中包的单位。 
  数据报: 是IP/UDP等网络层以上的分层中包的单位。 
  段: 则表示TCP数据流中的信息。
  消息: 则是指应用协议中数据的单位。
```

```
  包首部就像是协议的脸
  网络中传输的数据包由两部分组成: 一部分是协议所要用到的首部，另一部分是上层传过来的数据。
  首部的结构由协议的具体规范详细定义。例如，识别上一层协议的域应该从包的哪一位开始取多少个比特、
  如何计算校验和并插入包的哪一位等。相互通信的两端计算机如果在识别协议的序号以及校验和的计算方法上不一样，就根本无法实现通信。
  
  因此，在数据包的首部，明确标明了协议应该如何读取数据。反过来说，看到首部，也就能够了解该协议必要的信息以及所要处理的内容。
  因此，看到包首部就如同看到协议的规范。难怪有人说首部就像是协议的脸了。
```

### 2.5.2 发送数据包
  假设甲给乙发送电子邮件，内容为:“早上好”。而从TCP/IP通信上看，是从一台计算机A向另一台计算机B发送电子邮件。我们就通过这个例子来讲解一下TCP/IP通信的过程。
  
#### 1. 应用程序处理
